"use strict";(self.webpackChunkshkaf=self.webpackChunkshkaf||[]).push([[837],{8349:function(e,t,s){s.r(t),s.d(t,{default:function(){return T}});var r=s(1413),o=s(5671),n=s(3144),i=s(136),a=s(516),l=s(2791),u=s(9439),c={banner:"ProfileInfo_banner__RQgMA",descriptionBlock:"ProfileInfo_descriptionBlock__rP9Ds",profileInfo:"ProfileInfo_profileInfo__eqVEW",profilePhoto:"ProfileInfo_profilePhoto__0RCCb",profileData:"ProfileInfo_profileData__NPMn8",fullName:"ProfileInfo_fullName__wE-yq",lookingForAJob:"ProfileInfo_lookingForAJob__Kpyh9",contacts:"ProfileInfo_contacts__YpTm1",statusLabel:"ProfileInfo_statusLabel__HBIJ7",formSummaryError:"ProfileInfo_formSummaryError__uZNPe"},p=s(4751),d=s.p+"static/media/banner-picture.d55c92fa3dd7b1a28758.png",f=s(7808),h=s(184),m=function(e){var t=(0,l.useState)(!1),s=(0,u.Z)(t,2),r=s[0],o=s[1],n=(0,l.useState)(e.status),i=(0,u.Z)(n,2),a=i[0],p=i[1];(0,l.useEffect)((function(){p(e.status)}),[e.status]);var d=function(){!r&&e.isOwner?o(!0):e.isOwner&&(o(!1),e.updateStatus(a))};return(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{className:c.statusLabel,children:"Status: "}),!r&&(0,h.jsxs)("span",{onClick:d,children:[(0,h.jsx)("br",{}),e.status||"---"]}),r&&(0,h.jsx)("div",{children:(0,h.jsx)("input",{onChange:function(e){p(e.currentTarget.value)},autoFocus:!0,onBlur:d,value:a})})]})},j=s(9805),x=s(704),v=(0,j.N)("input"),P=(0,j.N)("textarea"),b=function(e){var t=e.handleSubmit,s=e.profile,r=e.error;return(0,h.jsxs)("form",{onSubmit:t,children:[(0,h.jsx)("button",{children:"Save"}),!!r&&(0,h.jsx)("div",{className:c.formSummaryError,children:r}),(0,h.jsx)("div",{children:"Full name: "}),(0,j.G)("Full name","fullName",[],v),(0,h.jsx)("div",{children:"About me: "}),(0,j.G)("About me","aboutMe",[],P),(0,h.jsx)("div",{children:"Looking for a job: "}),(0,j.G)(null,"lookingForAJob",null,"input",{type:"checkbox"},"Yes"),(0,h.jsx)("div",{children:"Professional skills: "}),(0,j.G)("Professional skills","lookingForAJobDescription",[],P),(0,h.jsx)("br",{}),"Contacts:",(0,h.jsx)("div",{className:c.contacts,children:Object.keys(s.contacts).map((function(e){return(0,h.jsxs)("div",{children:[(0,h.jsxs)("b",{children:[e,": "]}),(0,j.G)(e,"contacts.".concat(e),null,v)]},e)}))})]})};b=(0,x.Z)({form:"edit-profile"})(b);var g=function(e){var t=e.isOwner,s=e.profile,r=e.status,o=e.updateStatus,n=e.updatePhoto,i=e.updateProfile,a=(0,l.useState)(!1),j=(0,u.Z)(a,2),x=j[0],v=j[1],P=function(){return v(!x)};if(!s)return(0,h.jsx)(p.Z,{});var g=function(){return s.lookingForAJob?(0,h.jsxs)("div",{className:c.lookingForAJob,children:["\u041e\u0442\u043a\u0440\u044b\u0442 \u0434\u043b\u044f \u0432\u0430\u043a\u0430\u043d\u0441\u0438\u0439",(0,h.jsx)("img",{src:"https://emojio.ru/images/apple-b/2705.png"})]}):s.lookingForAJob?void 0:(0,h.jsxs)("div",{className:c.lookingForAJob,children:["\u0420\u0430\u0431\u043e\u0442\u0430\u044e ",(0,h.jsx)("img",{src:"https://emojis.wiki/emoji-pics/lg/tractor-lg.png"})]})},k=function(e){var t=e.profile,s=e.isOwner,r=e.activateEditMode,o=function(e){var t=e.contactTitle,s=e.contactValue;return(0,h.jsxs)("div",{children:[(0,h.jsxs)("span",{children:[t,": "]}),s]})};return(0,h.jsxs)("div",{className:c.profileData,children:[s&&(0,h.jsx)("button",{onClick:r,children:"Edit"}),(0,h.jsx)("div",{className:c.fullName,children:t.fullName}),t.aboutMe&&(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{children:"About me: "}),t.aboutMe]}),g(),t.lookingForAJobDescription&&(0,h.jsxs)("div",{className:c.lookingForAJobDescription,children:[(0,h.jsx)("span",{children:"Professional skills: "}),t.lookingForAJobDescription]}),(0,h.jsxs)("div",{className:c.contacts,children:[(0,h.jsx)("div",{children:"Contacts:"}),Object.keys(t.contacts).map((function(e){return t.contacts[e]&&(0,h.jsx)(o,{contactTitle:e,contactValue:t.contacts[e]})}))]})]})};return(0,h.jsx)("div",{children:(0,h.jsxs)("div",{className:c.banner,children:[(0,h.jsx)("img",{alt:"Profile",className:c.banner,src:d}),(0,h.jsxs)("div",{className:c.descriptionBlock,children:[(0,h.jsxs)("div",{className:c.profilePhoto,children:[(0,h.jsx)("img",{alt:"User",src:s.photos.large||f}),t&&(0,h.jsx)("input",{type:"file",onChange:function(e){e.target.files[0]&&n(e.target.files[0])}})]}),(0,h.jsxs)("div",{className:c.profileInfo,children:[x?(0,h.jsx)(b,{initialValues:s,profile:s,activateEditMode:P,onSubmit:function(e){console.log(e),i(e).then((function(){return P()}))}}):(0,h.jsx)(k,{profile:s,isOwner:t,activateEditMode:P}),(0,h.jsx)(m,{isOwner:t,status:r,updateStatus:o})]})]})]})})},k=s(6070),_="MyPosts_postsBlock__lzSOf",N="Post_item__c53nU",S=function(e){return(0,h.jsxs)("div",{className:N,children:[(0,h.jsx)("img",{src:"https://s5o.ru/storage/simple/ru/edt/aa/db/b0/29/rue97ff35b337.png"}),e.message," ",(0,h.jsx)("br",{}),(0,h.jsx)("span",{children:"Likes"})," ",e.likecount]})},w=s(6139),I=s(5304),A=(0,I.D)(30),Z=(0,j.N)("textarea"),y=function(e){return(0,h.jsxs)("form",{onSubmit:e.handleSubmit,children:[(0,h.jsx)(w.Z,{component:Z,name:"newPostText",placeholder:"New post will be here",validate:[I.C,A]}),(0,h.jsx)("button",{children:"Add post"})]})};y=(0,x.Z)({form:"post"})(y);var C=function(e){(0,i.Z)(s,e);var t=(0,a.Z)(s);function s(){var e;(0,o.Z)(this,s);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).addNewPost=function(t){e.props.addPost(t.newPostText)},e}return(0,n.Z)(s,[{key:"render",value:function(){var e=this.props.postsData.map((function(e){return(0,h.jsx)(S,{message:e.message,likecount:e.likesCount},e.id)}));return(0,h.jsxs)("div",{className:_,children:[(0,h.jsx)("h3",{children:"My posts"}),(0,h.jsxs)("div",{children:["Write new post ",(0,h.jsx)("br",{}),(0,h.jsx)(y,{onSubmit:this.addNewPost})]}),(0,h.jsx)("div",{children:e})]})}}]),s}(l.PureComponent),D=C,F=s(8687),O=(0,F.$j)((function(e){return{postsData:e.profilePage.postsData,newPostText:e.profilePage.newPostText}}),(function(e){return{addPost:function(t){e((0,k.Wl)(t))}}}))(D),U=function(e){return(0,h.jsxs)("div",{children:[(0,h.jsx)(g,{isOwner:e.isOwner,profile:e.profile,status:e.status,updateStatus:e.updateStatus,updatePhoto:e.updatePhoto,updateProfile:e.updateProfile}),(0,h.jsx)(O,{})]})},J=s(7689),M=s(7781),E=function(e){(0,i.Z)(s,e);var t=(0,a.Z)(s);function s(){var e;(0,o.Z)(this,s);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).refreshProfile=function(){var t=e.props.router.params.userId;(t||(t=e.props.authorizedUserId))&&(e.props.getUserProfile(t),e.props.getUserStatus(t))},e}return(0,n.Z)(s,[{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t,s){this.props.router.params.userId!==e.router.params.userId&&this.refreshProfile()}},{key:"render",value:function(){var e=this.props.router.params.userId;return e||(e=this.props.authorizedUserId)?(0,h.jsx)("div",{children:(0,h.jsx)(U,(0,r.Z)((0,r.Z)({},this.props),{},{isOwner:!this.props.router.params.userId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,updatePhoto:this.props.updatePhoto,updateProfile:this.props.updateProfile}))}):(0,h.jsx)(J.Fg,{to:"/login"})}}]),s}(l.Component),T=(0,M.qC)((0,F.$j)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,userPhoto:e.profilePage.userPhoto,authorizedUserId:e.authUserBro.data.id,isAuth:e.authUserBro.isAuth}}),{getUserProfile:k.om,getUserStatus:k.xD,updateStatus:k.NN,updatePhoto:k.h8,updateProfile:k.RS}),(function(e){return function(t){var s=(0,J.TH)(),o=(0,J.s0)(),n=(0,J.UO)();return(0,h.jsx)(e,(0,r.Z)((0,r.Z)({},t),{},{router:{location:s,navigate:o,params:n}}))}}))(E)}}]);
//# sourceMappingURL=837.4959c00a.chunk.js.map